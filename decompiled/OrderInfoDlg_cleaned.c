// Decompiled code from stars.exe (Stars! 2.60j RC3)
// Generated by Ghidra, cleaned up for readability
//
// Function: OrderInfoDlg
// Address: 1018:151e
//
// This is a simple dialog procedure for an "Order Info" dialog.
// It handles background painting and OK/Cancel buttons.

#include <windows.h>

// External globals (defined elsewhere)
extern HBRUSH hbrButtonFace;      // Brush for button face color
extern COLORREF crButtonFace;     // Button face color value

// Windows message constants (Win16)
#define WM_ERASEBKGND    0x0014   // Erase background
#define WM_CTLCOLOR      0x0019   // Control color (Win16 - replaced by WM_CTLCOLORDLG etc in Win32)
#define WM_COMMAND       0x0111   // Command from control

// Control color types (returned in HIWORD of lParam for WM_CTLCOLOR)
#define CTLCOLOR_STATIC  6        // Static control

// Dialog button IDs
#define IDOK             1
#define IDCANCEL         2

/**
 * OrderInfoDlg - Dialog procedure for the Order Info dialog
 *
 * @param hwnd    - Handle to the dialog window
 * @param message - The window message
 * @param wParam  - Message-specific parameter
 * @param lParam  - Message-specific parameter
 * @return        - TRUE if message was handled, FALSE otherwise
 *                  (or brush handle for WM_CTLCOLOR)
 */
BOOL CALLBACK OrderInfoDlg(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    RECT rc;

    switch (message) {

    case WM_ERASEBKGND:
        // Fill the client area with the button face color
        GetClientRect(hwnd, &rc);
        FillRect((HDC)wParam, &rc, hbrButtonFace);
        return TRUE;

    case WM_CTLCOLOR:
        // For static controls, set background to button face color
        // In Win16, HIWORD(lParam) contains the control type
        if (HIWORD(lParam) == CTLCOLOR_STATIC) {
            SetBkColor((HDC)wParam, crButtonFace);
            return (BOOL)hbrButtonFace;  // Return brush handle
        }
        break;

    case WM_COMMAND:
        // Handle OK and Cancel buttons
        if (wParam == IDCANCEL || wParam == IDOK) {
            EndDialog(hwnd, 1);
            return TRUE;
        }
        break;
    }

    return FALSE;  // Message not handled
}
